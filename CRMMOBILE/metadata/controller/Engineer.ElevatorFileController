{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Engineer.ElevatorFileController"
    },
    "name": "MyController",
    "designerId": "f617e50a-1aec-4857-bd9c-d3dc669d5eb0",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#EngElevatorFile",
                "designer|params": [
                    "component",
                    "eOpts"
                ],
                "designer|targetType": "Ext.Panel",
                "fn": "onEngElevatorFileInitialize",
                "implHandler": [
                    "var me = this;",
                    "var elevatorList = Ext.getCmp('EngElevatorFile_List');",
                    "elevatorList.getStore().removeAll();",
                    "curPage = 0;//全局变量",
                    "pagesize = 20;",
                    "",
                    "updatejurisdiction = false;//修改权限",
                    "deletejueisdiction = false;//删除权限",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "elevatorList.setPlugins(",
                    "    [",
                    "        {",
                    "            autoSnapBack: false,",
                    "            lastUpdatedText: '上次刷新:&nbsp;',",
                    "            loadedText: '已刷新',",
                    "            loadingText: '正在刷新电梯档案...',",
                    "            pullText: '下拉刷新...',",
                    "            releaseText: '放开开始刷新...',",
                    "            type: 'pullrefresh',",
                    "            listeners : {",
                    "                latestfetched : function() {",
                    "",
                    "                    me.doEngElevatorFile_Search(",
                    "                    1, pagesize, {searchkey:Ext.getCmp('EngElevatorFile_Search').getValue()},",
                    "                        'refresh');",
                    "                }",
                    "            }",
                    "        },",
                    "        // 以下滑动按钮插件应从EngHomeController的onEngHomeInitial()中复制！",
                    "        {",
                    "            xclass: 'ux.SlideActions',",
                    "            openPosition: 150,",
                    "            buttons:",
                    "            [",
                    "                // 按钮1",
                    "                {",
                    "                    xtype: 'button',",
                    "                    baseCls: 'x-button liftnet-list-button liftnet-bgColor-blue',",
                    "                    text: '修改',",
                    "                    initial: function(btn) {",
                    "                        //初始化滑动按钮",
                    "                        me.doInitialNextStateButton(btn);",
                    "                    },",
                    "                    listeners: {",
                    "                        tap: function(button, e){",
                    "                            e.stopPropagation();",
                    "                            return false;",
                    "                        },",
                    "                        scope: this",
                    "                    },",
                    "                    handler: function(button, e) {",
                    "                        elevatorList.fireEvent('hide'); // 隐藏列表的滑动按钮组",
                    "                        liftnet.app.getController('Engineer.ElevatorFileController').",
                    "                        doElevatorFile_Process({",
                    "                            record: button.getRecord(),",
                    "                            operation: '修改'",
                    "                        });",
                    "                    },",
                    "                    width:200",
                    "                },",
                    "                // 按钮2",
                    "                {",
                    "                    xtype: 'button',",
                    "                    baseCls: 'x-button liftnet-list-button liftnet-bgColor-red',",
                    "                    text: '删除',",
                    "                    initial: function(btn) {",
                    "                        //初始化滑动按钮",
                    "                        me.doInitialNextStateButton(btn);",
                    "                    },",
                    "                    listeners: {",
                    "                        tap: function(button, e){",
                    "                            e.stopPropagation();",
                    "                            return false;",
                    "                        },",
                    "                        scope: this",
                    "                    },",
                    "                    handler: function(button, e) {",
                    "                        elevatorList.fireEvent('hide'); // 隐藏列表的滑动按钮组",
                    "                        liftnet.app.getController('Engineer.ElevatorFileController').",
                    "                        doElevatorFile_Process({",
                    "                            record: button.getRecord(),",
                    "                            operation: '删除'",
                    "                        });",
                    "                    }",
                    "                }",
                    "            ]",
                    "        }",
                    "    ]",
                    ");",
                    "",
                    "//监听滑动结束事件",
                    "var scroller = elevatorList.getScrollable().getScroller();",
                    "scroller.on('scrollend',function(scroll, x, y, eOpts){",
                    "    if(curPage===0){",
                    "        return;",
                    "    }",
                    "    //滑动到底部加载更多",
                    "    if(y+scroller.getContainerSize().y==scroller.getSize().y){",
                    "        loadMask.show();",
                    "        var scrollparm = {",
                    "            scroller:scroller,",
                    "            x:x,",
                    "            y:y+80//Item的高度",
                    "        };",
                    "        if(!Ext.getCmp('EngElevatorFile_Search')){",
                    "            loadMask.hide();",
                    "            return;",
                    "        }",
                    "        var searchkeyParm = {",
                    "            //关键字",
                    "            searchkey:Ext.getCmp('EngElevatorFile_Search').getValue(),",
                    "        };",
                    "        me.doEngElevatorFile_Search(",
                    "            ++curPage,",
                    "            pagesize,",
                    "            searchkeyParm,",
                    "            'loadmore',",
                    "            scrollparm",
                    "        );",
                    "    }",
                    "});",
                    "",
                    "//初始化加载数据",
                    "me.doEngElevatorFile_Search(",
                    "                    1, pagesize, {searchkey:Ext.getCmp('EngElevatorFile_Search').getValue()},",
                    "                        'refresh');",
                    ""
                ],
                "name": "initialize"
            },
            "name": "onEngElevatorFileInitialize",
            "designerId": "bbdb0965-5538-42d8-8f11-33ae16c392cb"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#EngElevatorFile_BtnReturn",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.Button",
                "fn": "onEngElevatorFile_BtnReturnTap",
                "implHandler": [
                    "viewUtil.goLast();"
                ],
                "name": "tap"
            },
            "name": "onEngElevatorFile_BtnReturnTap",
            "designerId": "4df2af7d-b5e8-4454-93ce-708768613129"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "searchfield#EngElevatorFile_Search",
                "designer|params": [
                    "textfield",
                    "newValue",
                    "oldValue",
                    "eOpts"
                ],
                "designer|targetType": "Ext.field.Search",
                "fn": "onEngElevatorFile_SearchChange",
                "implHandler": [
                    "",
                    "this.doEngElevatorFile_Search(1,pagesize,{searchkey:newValue},'search');"
                ],
                "name": "change"
            },
            "name": "onEngElevatorFile_SearchChange",
            "designerId": "efa50c4c-e4aa-41f2-b0b2-55293f7a96b7"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "list#EngElevatorFile_List",
                "designer|params": [
                    "dataview",
                    "index",
                    "target",
                    "record",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.dataview.List",
                "fn": "onEngElevatorFile_ListItemTap",
                "implHandler": [
                    "if(!record.get('prono')){",
                    "    Ext.toast('电梯注册码为空</br></br>无法查看相关电梯档案');",
                    "    return;",
                    "}",
                    "viewUtil.goNext('Engineer.EngMonitorElevatorInfo',{prono:record.get('prono')});"
                ],
                "name": "itemtap"
            },
            "name": "onEngElevatorFile_ListItemTap",
            "designerId": "cc5ebd10-1060-4a91-a336-7b8e40d4d5cc"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#EngElevatorFile_NewBtn",
                "designer|params": [
                    "button",
                    "e",
                    "eOpts"
                ],
                "designer|targetType": "Ext.Button",
                "fn": "onEngElevatorFile_NewBtnTap",
                "implHandler": [
                    "//Ext.toast('电梯档案录入功能正在开发中</br></br>敬请期待！');",
                    "",
                    "// 右上角新增电梯按钮",
                    "viewUtil.goNext('Engineer.EngElevatorFile_Add');",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onEngElevatorFile_NewBtnTap",
            "designerId": "974b77ae-81df-4ef5-9bb3-2567ccb380a3"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "page",
                    "pagesize",
                    "searchkeyParm",
                    "action",
                    "scrollparm"
                ],
                "fn": "doEngElevatorFile_Search",
                "implHandler": [
                    "",
                    "var me = this;",
                    "Ext.getCmp('EngElevatorFile_List').getStore().loadDat(",
                    "    function(ret,resetCurPage,jurisdiction){",
                    "        if(scrollparm){",
                    "            scrollparm.scroller.scrollTo(scrollparm.x,scrollparm.y);",
                    "        }",
                    "        if(resetCurPage){",
                    "            curPage = 1;//获取新数据成功，页数重置为1",
                    "        }",
                    "",
                    "        var addjurisdiction = jurisdiction.addjurisdiction;//新建权限",
                    "        Ext.getCmp('EngElevatorFile_NewBtn').setHidden(addjurisdiction=='N');",
                    "",
                    "        updatejurisdiction = jurisdiction.updatejurisdiction=='N';//修改权限",
                    "        deletejueisdiction = jurisdiction.deletejueisdiction=='N';//删除权限",
                    "",
                    "",
                    "        loadMask.hide();",
                    "    },",
                    "    function(info,cutOne){",
                    "        Ext.toast(info);",
                    "        if(cutOne){",
                    "            curPage--;//加载更多数据失败，页数减一",
                    "        }",
                    "        if(info==='没有更多数据！'){",
                    "            curPage = 0;//没有更多数据的时候重置页数为0，不触发上拉事件",
                    "        }",
                    "        loadMask.hide();",
                    "",
                    "    },",
                    "    {",
                    "        curpagenum:page,",
                    "        pagesize:pagesize,",
                    "        searchkey:searchkeyParm.searchkey,",
                    "    },",
                    "    action",
                    ");"
                ]
            },
            "name": "doEngElevatorFile_Search",
            "designerId": "2425fa30-4741-45cf-b7b7-7bdb41370d41"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#ElevatorFile_BtnReturn",
                "designer|targetType": "Ext.Button",
                "fn": "onElevatorFile_BtnReturnTap",
                "implHandler": [
                    "viewUtil.goLast();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_BtnReturnTap",
            "designerId": "d04f395e-5eec-4b05-9746-1f690842dfda"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#ElevatorFile_SaveBtn",
                "designer|targetType": "Ext.Button",
                "fn": "onElevatorFile_SaveBtnTap",
                "implHandler": [
                    "//电梯档案操作",
                    "",
                    "this.doEneElevatorFile_Save(button.getText());",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_SaveBtnTap",
            "designerId": "d8829108-5b5a-4b0f-bd48-65b697f0aaa0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "action"
                ],
                "fn": "doEneElevatorFile_Save",
                "implHandler": [
                    "//电梯档案操作-新建/修改",
                    "var me = this;",
                    "var form = Ext.getCmp('ElevatorFile_Info_Form');",
                    "var lift = form.getValues();",
                    "",
                    "",
                    "// 检查必填项目",
                    "var fields = form.getFields();",
                    "for(var name in fields) {",
                    "  field = fields[name];",
                    "  if(field.getRequired() && (field.getValue()===''||!field.getValue())) {",
                    "      Ext.Msg.alert('注意', '必须填写\"' + field.getLabel() + '\"', Ext.emptyFn);",
                    "      return;",
                    "  }else{",
                    "      if(name=='prono'){// 检查设备注册码是否合法",
                    "          if(!field.getValue().match(/^(\\d{4}-\\d{6}-\\d{6}-\\d{1,8})$/)){",
                    "              Ext.Msg.alert('注意', '设备注册码的格式有误',Ext.emptyFn);",
                    "              return;",
                    "          }",
                    "      }else if(name=='zzl' || name==='speed' || name==='high' || name==='fwlc'){//检测载重量、速度、提升高度、倾斜角",
                    "            if(field.getValue()!='' && !field.getValue().match(/^[0-9]+(.[0-9]{1,2})?$/)){",
                    "                field.suspendEvents();",
                    "                Ext.toast(field.getLabel()+'必须填写数字(至多两位小数)！');",
                    "                field.resumeEvents(false);",
                    "                return;",
                    "            }",
                    "      }else if(name==='floor' || name==='stage' || name==='door' || name==='r9' || name==='controlnum'){//检测层、站、门、到期预警天数、群控台数",
                    "            if(field.getValue()!='' && !field.getValue().match(/^[0-9]*$/)){",
                    "                field.suspendEvents();",
                    "                Ext.toast(field.getLabel()+'必须填写正整数！');",
                    "                field.resumeEvents(false);",
                    "                return;",
                    "            }",
                    "      }else if(name==='userlinkphone' || name==='r5'){//检测联系电话",
                    "          if(field.getValue()!='' && !global.isTelNo(field.getValue())) {",
                    "            field.suspendEvents();",
                    "            Ext.toast(field.getLabel()+'电话号码格式不正确！');",
                    "            field.resumeEvents(false);",
                    "            return;",
                    "        }",
                    "      }",
                    "  }",
                    "}",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "//保存图片信息",
                    "var picturesJSON = [];",
                    "for(var i=1;i<7;i++){",
                    "    var ImgID = 'ElevatortFile_Photo_'+i;",
                    "    var RemarkID = 'ElevatorFile_Remark_'+i;",
                    "    var Remark = Ext.getCmp(RemarkID).getHtml();",
                    "",
                    "    var Img = Ext.getCmp(ImgID);",
                    "    if(Img){",
                    "    var ImgSrc = Ext.getCmp(ImgID).getSrc();",
                    "    if(ImgSrc!=='resources/images/notPhoto.png'&&ImgSrc!=='resources/images/camera.png'){",
                    "        console.log(ImgID);",
                    "        var pic = ImgSrc.split(',')[1];",
                    "        var picturesJSONSize = picturesJSON.length;",
                    "        var picIndex = picturesJSONSize+1;",
                    "        picturesJSON[picturesJSONSize]={",
                    "            file : pic,",
                    "            remark\t: Remark",
                    "        };",
                    "    }",
                    "    }",
                    "}",
                    "console.log(picturesJSON);",
                    "",
                    "lift.imagefile = picturesJSON;",
                    "if(!lift.citylevelid){",
                    "    lift.citylevelid='';",
                    "}",
                    "",
                    "//处理时间",
                    "lift.leafacdate = (!lift.leafacdate?'':Ext.Date.format(lift.leafacdate,'Y-m-d'));",
                    "lift.r7 = (!lift.r7?'':Ext.Date.format(lift.r7,'Y-m-d'));",
                    "lift.r8 = (!lift.r8?'':Ext.Date.format(lift.r8,'Y-m-d'));",
                    "",
                    "if(lift.finishdate){",
                    "    lift.finishdate = Ext.Date.format(lift.finishdate,'Y-m-d');",
                    "}else{",
                    "    lift.finishdate = '';",
                    "}",
                    "",
                    "if(lift.firstuseliftdate){",
                    "    lift.firstuseliftdate = Ext.Date.format(lift.firstuseliftdate,'Y-m-d');",
                    "}else{",
                    "    lift.firstuseliftdate = '';",
                    "}",
                    "",
                    "if(lift.speedcheckdate){",
                    "    lift.speedcheckdate = Ext.Date.format(lift.speedcheckdate,'Y-m-d');",
                    "}else{",
                    "    lift.speedcheckdate = '';",
                    "}",
                    "",
                    "if(lift.speednextcheckdate){",
                    "    lift.speednextcheckdate = Ext.Date.format(lift.speednextcheckdate,'Y-m-d');",
                    "}else{",
                    "    lift.speednextcheckdate = '';",
                    "}",
                    "",
                    "",
                    "console.log(lift.finishdate);",
                    "console.log(lift.firstuseliftdate);",
                    "console.log(lift.speedcheckdate);",
                    "console.log(lift.speednextcheckdate);",
                    "",
                    "var parm = {",
                    "    userid: global.getUserId(),",
                    "    lift: lift",
                    "};",
                    "console.log(parm);",
                    "var store = dataUtil.createStore('eng_elevatorfile_scens');",
                    "loadMask.show();",
                    "",
                    "store.updateDat(",
                    "    function(trno) {",
                    "        loadMask.hide();",
                    "        if(trno) {",
                    "            Ext.toast(action + '操作完成！');",
                    "        } else {",
                    "            Ext.toast(action + '操作完成！');",
                    "        }",
                    "",
                    "        //刷新列表",
                    "        me.doEngElevatorFile_Search(1,20,{searchkey:''},'refresh');",
                    "        viewUtil.goLast();",
                    "    },",
                    "    function(info) {",
                    "        loadMask.hide();",
                    "        if(!info) info = '(未知)';",
                    "        Ext.toast('未能完成' + action + '操作，错误信息是：' + info);",
                    "    },",
                    "    parm",
                    ");",
                    "",
                    "",
                    ""
                ]
            },
            "name": "doEneElevatorFile_Save",
            "designerId": "24a9a1e6-5f7e-49c4-b9b9-f44175382285"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_typeid",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_typeidTap",
                "implHandler": [
                    "//电梯分类",
                    "var tpl =",
                    "'<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{typename}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_lifttypelist',",
                    "    storeparm: {",
                    "        userid: global.getUserId()",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: false,",
                    "    allowedit: false,",
                    "    allowsearch: false,",
                    "    fnSetFilter: Ext.emptyFn,",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "        } else {",
                    "            var value = record.get('typename');",
                    "            textfield.setValue(value);",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_typeidTap",
            "designerId": "cb186c1c-a43e-4ab1-8819-6c2801070d8c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#EngElevatorFile_Add",
                "designer|targetType": "Ext.Panel",
                "fn": "onEngElevatorFile_AddInitialize",
                "implHandler": [
                    "var me = this;",
                    "var form = Ext.getCmp('ElevatorFile_Info_Form');",
                    "loadMask.show();",
                    "",
                    "// 初始化下拉选择项目",
                    "dataUtil.createStore('eng_placelist').loadDat(Ext.emptyFn,Ext.emptyFn);",
                    "dataUtil.createStore('eng_lifttypelist').loadDat(Ext.emptyFn,Ext.emptyFn);",
                    "dataUtil.createStore('eng_kmfslist').loadDat(Ext.emptyFn,Ext.emptyFn);",
                    "dataUtil.createStore('eng_kzfslist').loadDat(Ext.emptyFn,Ext.emptyFn);",
                    "",
                    "",
                    "",
                    "",
                    "if(component.initialConfig.parm){",
                    "    if(component.initialConfig.parm.record) {//修改",
                    "        var prono = component.initialConfig.parm.record.get('prono');",
                    "",
                    "        Ext.getCmp('ELevatorFile_Tbr').setTitle('修改电梯档案');",
                    "",
                    "        var store = dataUtil.createStore('eng_elevatorinfo');",
                    "",
                    "        store.loadDat(",
                    "            function() {",
                    "                loadMask.hide();",
                    "                form.setRecord(store.getAt(0));",
                    "                console.log(store.getAt(0).get('domainidstr'));",
                    "",
                    "                form.setValues({",
                    "                    r1name: store.getAt(0).get('facname'),",
                    "                    r12name: store.getAt(0).get('projectname'),",
                    "                    r12: store.getAt(0).get('projectid'),",
                    "",
                    "                    leafacdate : (store.getAt(0).get('leafacdate')==''||!store.getAt(0).get('leafacdate'))?'':new Date(store.getAt(0).get('leafacdate')),",
                    "                    r7 : (store.getAt(0).get('r7')==''||!store.getAt(0).get('r7'))?'': new Date(store.getAt(0).get('r7')),",
                    "                    r8 : (store.getAt(0).get('r8')==''||!store.getAt(0).get('r8'))?'': new Date(store.getAt(0).get('r8')),",
                    "                    finishdate : (store.getAt(0).get('finishdate')==''||!store.getAt(0).get('finishdate'))?'': new Date(store.getAt(0).get('finishdate')),",
                    "                    firstuseliftdate : (store.getAt(0).get('firstuseliftdate')==''||!store.getAt(0).get('firstuseliftdate'))?'':new Date(store.getAt(0).get('firstuseliftdate')),",
                    "                    speedcheckdate : (store.getAt(0).get('speedcheckdate')==''||!store.getAt(0).get('speedcheckdate'))?'':new Date(store.getAt(0).get('speedcheckdate')),",
                    "                    speednextcheckdate : (store.getAt(0).get('speednextcheckdate')==''||!store.getAt(0).get('speednextcheckdate'))?'':new Date(store.getAt(0).get('speednextcheckdate')),",
                    "",
                    "                });",
                    "",
                    "",
                    "",
                    "                Ext.getCmp('ElevatorFile_NowProno').setValue(store.getAt(0).get('prono'));",
                    "",
                    "                var imagefile = store.getAt(0).get('imagefile');//附件JSON",
                    "                if(imagefile!==null&&imagefile.length>0){",
                    "                    for(var z=0;z<imagefile.length;z++){",
                    "                        var index = z+1;",
                    "                        var ImgID = 'ElevatortFile_Photo_'+index;",
                    "                        var RemarkID = 'ElevatorFile_Remark_'+index;",
                    "                        var pictureBase64 = imagefile[z].file;",
                    "                        var Remark = imagefile[z].remark;",
                    "                        var ImgSrc = 'data:image/jpeg;base64,' +pictureBase64;",
                    "",
                    "                        Ext.getCmp(ImgID).setSrc(ImgSrc);",
                    "                        Ext.getCmp(ImgID).setItemId('ElevatortFile_photo');",
                    "                        Ext.getCmp(RemarkID).setHtml(Remark);",
                    "                    }",
                    "",
                    "                    var IngNum = imagefile.length+1;",
                    "                    Ext.getCmp('ElevatortFile_Photo_'+IngNum).setSrc('resources/images/camera.png');",
                    "                    Ext.getCmp('ElevatortFile_Photo_'+IngNum).setItemId('ElevatorFile_Photo_camera');",
                    "                }",
                    "",
                    "",
                    "",
                    "            },",
                    "            function() {",
                    "                loadMask.hide();",
                    "                Ext.toast('未能找到电梯档案资料，请稍候再试！');",
                    "                viewUtil.goLast();",
                    "            },",
                    "            {prono:prono}",
                    "        );",
                    "",
                    "    }",
                    "}else{//新建",
                    "        // 新单",
                    "        //var date_l = Ext.Date.format(new Date(), 'Y-m-d');",
                    "        //console.log(date_l);",
                    "//         form.setValues({",
                    "//             leafacdate : new Date(),",
                    "//             r7 : new Date(),",
                    "//             r8 : new Date(),",
                    "//             finishdate : new Date(),",
                    "//             firstuseliftdate : new Date(),",
                    "//             speedcheckdate : new Date(),",
                    "//             speednextcheckdate : new Date(),",
                    "",
                    "",
                    "//          });",
                    "    loadMask.hide();",
                    "",
                    "    }"
                ],
                "name": "initialize"
            },
            "name": "onEngElevatorFile_AddInitialize",
            "designerId": "2a676fb0-903f-46fc-9e4b-7b7b4eb4568c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_r1",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_r1Tap",
                "implHandler": [
                    "//电梯品牌",
                    "var tpl =",
                    "'<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{facname}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftfaclist',",
                    "    storeparm: {",
                    "        userid: global.getUserId(),",
                    "        searchname: textfield.getValue(),",
                    "        curpagenum: 1,",
                    "        pagesize: 20",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: true,",
                    "    allowedit: false,",
                    "    allowsearch: true,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchname = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "            Ext.getCmp('ElevatorFile_r1id').setValue('');",
                    "        } else {",
                    "            textfield.setValue(record.get('facname'));",
                    "            Ext.getCmp('ElevatorFile_r1id').setValue(record.get('facid'));",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_r1Tap",
            "designerId": "5119c2ff-8e74-4d8f-8ef5-7bbf66ce8d34"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_elevatorid",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_elevatoridTap",
                "implHandler": [
                    "//电梯型号",
                    "var tpl =",
                    "'<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{elevatorname}</div>'+",
                    "'<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{facname}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftdtxhlist',",
                    "    storeparm: {",
                    "        userid: global.getUserId(),",
                    "        searchname: textfield.getValue(),",
                    "        curpagenum: 1,",
                    "        pagesize: 20",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: true,",
                    "    allowedit: false,",
                    "    allowsearch: true,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchname = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "            Ext.getCmp('ElevatorFile_elevator').setValue('');",
                    "        } else {",
                    "            textfield.setValue(record.get('elevatorname'));",
                    "            Ext.getCmp('ElevatorFile_elevator').setValue(record.get('elevatorid'));",
                    "            Ext.getCmp('ElevatorFile_r1').setValue(record.get('facname'));",
                    "            Ext.getCmp('ElevatorFile_r1id').setValue(record.get('facid'));",
                    "",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_elevatoridTap",
            "designerId": "2a6bbd9d-0ce0-4f3c-ab40-bb4cd1c32f9c"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "textfield",
                    "fn"
                ],
                "fn": "doShowDatePicker",
                "implHandler": [
                    "// 新增电梯 - 日期选择初始化",
                    "var y = new Date().getFullYear();",
                    "var items = [",
                    "    {",
                    "        text: '现在',",
                    "        handler: function() {",
                    "            picker.setValueAnimated(new Date());",
                    "        }",
                    "    }];",
                    "var picker = Ext.create('ux.DateTime',",
                    "                        {",
                    "                            yearFrom: y - 1,",
                    "                            yearTo: y + 1,",
                    "                            doneButton: {",
                    "                                text: '确定',",
                    "                                handler: function() {",
                    "                                    textfield.setValue(",
                    "                                        Ext.Date.format(picker.getValue(),'Y-m-d'));",
                    "                                    picker.hide();",
                    "                                    if(fn && typeof(fn)==='function') {",
                    "                                        fn();",
                    "                                    }",
                    "                                    picker.destroy();",
                    "                                }",
                    "                            },",
                    "                            cancelButton: '取消',",
                    "                            toolbar: {",
                    "                                items : items",
                    "                            }",
                    "",
                    "                        });",
                    "",
                    "picker.setValue(Ext.Date.parse(textfield.getValue(), 'Y-m-d', true));",
                    "picker.getToolbar().setTitle(textfield.getLabel());",
                    "",
                    "Ext.Viewport.add(picker);",
                    "picker.show();"
                ]
            },
            "name": "doShowDatePicker",
            "designerId": "b50148b5-26fa-470a-b16d-a02626e7d8e8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "selectfield#ElevatorFile_contype",
                "designer|targetType": "Ext.field.Select",
                "fn": "onElevatorFile_contypeChange",
                "implHandler": [
                    "console.log('.........');",
                    "console.log(newValue);",
                    "if(newValue=='3'){",
                    "    Ext.getCmp('ElevatorFile_controlnum').setHidden(false);",
                    "}else{",
                    "    Ext.getCmp('ElevatorFile_controlnum').setHidden(true);",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_contypeChange",
            "designerId": "ea2dec3b-e276-462a-9900-8e3e9cf54e3e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_zzl",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_zzlChange",
                "implHandler": [
                    "//检测是否为数字",
                    "if(!newValue) return;",
                    "if(!newValue.match(/^[0-9]+(.[0-9]{1,2})?$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写数字(至多两位小数)！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_zzlChange",
            "designerId": "36d40bf9-456e-4326-8bc6-742a6bf57ebc"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_speed",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_speedChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]+(.[0-9]{1,2})?$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写数字(至多两位小数)！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_speedChange",
            "designerId": "862381db-c9c2-4424-9d10-af63396dd93a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#Elevator_high",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevator_highChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]+(.[0-9]{1,2})?$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写数字(至多两位小数)！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevator_highChange",
            "designerId": "1462afdb-9492-4b29-bdfe-fc494af89bb4"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_fwlc",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_fwlcChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]+(.[0-9]{1,2})?$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写数字(至多两位小数)！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_fwlcChange",
            "designerId": "359d06fd-f627-4769-b6e2-1a4ad2210863"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_floor",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_floorChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]*$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写正整数！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_floorChange",
            "designerId": "0ebed939-b956-448b-8b02-7e3d7da34b5a"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_stage",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_stageChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]*$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写正整数！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_stageChange",
            "designerId": "116a5c65-7588-49de-97ff-75c65d705d12"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#Elevator_door",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevator_doorChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]*$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写正整数！');",
                    "    textfield.resumeEvents(false);",
                    "    return;",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevator_doorChange",
            "designerId": "86a04b65-2092-40a2-ad4c-d6e380a9a413"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_projectname",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_projectnameTap",
                "implHandler": [
                    "//关联项目",
                    "var tl =",
                    "    '<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{r12}</div>'+",
                    "    '<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{}</div>';",
                    "",
                    "",
                    "var tpl =",
                    "    '<div class=\"liftnet-Maintenance-TaskRecList\" style=\"margin-top:-20px;height:70px;padding-bottom:5px;\">'+",
                    "        '<div class=\"liftnet-Maintenance-TaskRecList-left\" style=\"padding-top:0px;margin-left:-25px; \" >'+",
                    "            '<div class=\"liftnet-font-size12 liftnet-fontColor-darkGray\">{projectname}</div>'+",
                    "            '<div class=\"liftnet-font-size12 liftnet-fontColor-darkGray\">{pordid}</div>'+",
                    "            '<div class=\"liftnet-font-size12 liftnet-fontColor-darkGray\" >{eleuseaddress}</div>'+",
                    "        '</div>'+",
                    "        '<div class=\"liftnet-Maintenance-TaskRecList-right\" style=\"padding-top:0px;right:14px\" >'+",
                    "            '<div class=\"liftnet-font-size12 liftnet-font-right liftnet-fontColor-darkGray\">{ladderno}</div>'+",
                    "            '<div class=\"liftnet-font-size12 liftnet-font-right liftnet-fontColor-darkGray\">{r13}&nbsp;</div>'+",
                    "        '</div>'+",
                    "    '</div>';",
                    "",
                    "",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftglproject',",
                    "    storeparm: {",
                    "       userid: global.getUserId(),",
                    "       searchkey: textfield.getValue(),",
                    "       curpagenum: 1,",
                    "       pagesize: 20",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: true,",
                    "    allowedit: false,",
                    "    allowsearch: true,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchkey = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "        } else {",
                    "            var value = record.get('projectname');",
                    "            textfield.setValue(value);",
                    "            Ext.getCmp('ElevatorFile_r12').setValue(record.get('r12'));",
                    "            Ext.getCmp('ElevatorFile_r13').setValue(record.get('r13'));",
                    "            Ext.getCmp('ElevatorFile_detailrowid').setValue(record.get('detailrowid'));",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_projectnameTap",
            "designerId": "17fb56d0-6e10-4591-b873-65dba9769c84"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFie_r2",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFie_r2Tap",
                "implHandler": [
                    "//点击坐标进到地图界面",
                    "var lng = '';",
                    "var lat = '';",
                    "if(textfield.getValue()!==''){",
                    "    lng = textfield.getValue().split(',')[0];",
                    "    lat = textfield.getValue().split(',')[1];",
                    "}else{",
                    "    lng = map.getLocation().lng;",
                    "    lat = map.getLocation().lat;",
                    "}",
                    "",
                    "",
                    "viewUtil.goNext('Engineer.EngElevatorFile_Map',{lng:lng,lat:lat,fc:function(element, eOpts){",
                    "    var getlnglat = function(e){",
                    "        var map = new BMap.Map(\"ElevatorFile_MapPanel\");",
                    "        var pointA = new BMap.Point(e.point.lng,e.point.lat);",
                    "        var pointB = new BMap.Point(lng,lat);",
                    "        //if((map.getDistance(pointA,pointB)).toFixed(2)>2000){",
                    "        //    Ext.toast('请选择离当前位置两公里范围的地点,'+(map.getDistance(pointA,pointB)).toFixed(2));",
                    "        //}else{",
                    "        //}",
                    "",
                    "        console.log(e.point.lng+'____+__'+e.point.lat);",
                    "        var r2 = e.point.lng+','+e.point.lat;",
                    "        Ext.getCmp('ElevatorFie_r2').setValue(r2);",
                    "",
                    "        var parm = {",
                    "            lng:e.point.lng,",
                    "            lat:e.point.lat",
                    "        };",
                    "        viewUtil.goLast();",
                    "    };",
                    "",
                    "    map.create2('ElevatorFile_MapPanel',{lng:lng,lat:lat,zoom:18,fc:getlnglat});",
                    "",
                    "}});",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFie_r2Tap",
            "designerId": "9536f409-80a1-4565-8a24-9962c05d3ee5"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#EngElevatorFile_Map",
                "designer|targetType": "Ext.Panel",
                "fn": "onEngElevatorFile_MapInitialize",
                "implHandler": [
                    "var lng = component.initialConfig.parm.lng;//当前经度",
                    "var lat = component.initialConfig.parm.lat;//当前纬度",
                    "",
                    "",
                    "",
                    "Ext.getCmp('ElevatorFile_MapPanel').on('painted',component.initialConfig.parm.fc);",
                    ""
                ],
                "name": "initialize"
            },
            "name": "onEngElevatorFile_MapInitialize",
            "designerId": "b84ba60f-b21e-410c-b42b-b082726a5633"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#EngElevatorFile_Map",
                "designer|targetType": "Ext.Panel",
                "fn": "onEngElevatorFile_MapDestroy",
                "implHandler": [
                    "map.destroyById('ElevatorFile_MapPanel');"
                ],
                "name": "destroy"
            },
            "name": "onEngElevatorFile_MapDestroy",
            "designerId": "b6fbbec8-1e25-4d34-a37b-1af271ad0b29"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_domainidStr",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_domainidStrTap",
                "implHandler": [
                    "//地区区域切换时,取地区省份数据",
                    "//if(!newValue || newValue==oldValue) return;",
                    "//console.log('-----查询省份-----');",
                    "//dataUtil.createStore('eng_liftprovinciallevelid').loadDat(Ext.emptyFn,Ext.emptyFn,{userid:global.getUserId(),areatype:'B',areaid:newValue});",
                    "",
                    "",
                    "//获取区域",
                    "var tpl =",
                    "    '<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{areaname}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftdomainid',",
                    "    storeparm: {",
                    "       userid: global.getUserId(),",
                    "       searchkey: textfield.getValue(),",
                    "       areatype: 'A',",
                    "       areaid: ''",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: false,",
                    "    allowedit: false,",
                    "    allowsearch: false,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchkey = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "        } else {",
                    "            var value = record.get('areaname');",
                    "            textfield.setValue(value);",
                    "            Ext.getCmp('ElevatorFile_domainid').setValue(record.get('areaid'));",
                    "",
                    "            //清空省份、所在市、县区",
                    "            Ext.getCmp('ElevatorFile_provinciallevelidStr').setValue();",
                    "            Ext.getCmp('ElevatorFile_provinciallevelid').setValue();",
                    "            Ext.getCmp('ElevatorFile_citylevelidStr').setValue();",
                    "            Ext.getCmp('ElevatorFile_citylevelid').setValue();",
                    "            Ext.getCmp('ElevatorFile_countylevelidStr').setValue();",
                    "            Ext.getCmp('ElevatorFile_countylevelid').setValue();",
                    "",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_domainidStrTap",
            "designerId": "a0dd1686-8e59-4b2a-8b42-22e4ce78cfa7"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_provinciallevelidStr",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_provinciallevelidStrTap",
                "implHandler": [
                    "",
                    "//获取省份",
                    "var areaid = Ext.getCmp('ElevatorFile_domainid');//区域ID",
                    "",
                    "if(areaid.getValue()==''){",
                    "    Ext.toast('请先选择区域!');",
                    "    return;",
                    "}",
                    "",
                    "var tpl =",
                    "    '<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{areaname}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftprovinciallevelid',",
                    "    storeparm: {",
                    "       userid: global.getUserId(),",
                    "       searchkey: textfield.getValue(),",
                    "       areatype: 'B',",
                    "       areaid: areaid.getValue()",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: false,",
                    "    allowedit: false,",
                    "    allowsearch: false,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchkey = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "        } else {",
                    "            var value = record.get('areaname');",
                    "            textfield.setValue(value);",
                    "            Ext.getCmp('ElevatorFile_provinciallevelid').setValue(record.get('areaid'));",
                    "",
                    "            //清空所在市、县区",
                    "            Ext.getCmp('ElevatorFile_citylevelidStr').setValue();",
                    "            Ext.getCmp('ElevatorFile_citylevelid').setValue();",
                    "            Ext.getCmp('ElevatorFile_countylevelidStr').setValue();",
                    "            Ext.getCmp('ElevatorFile_countylevelid').setValue();",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_provinciallevelidStrTap",
            "designerId": "7f2055c2-51f2-4dd0-84c2-f8a2697284b8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_citylevelidStr",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_citylevelidStrTap",
                "implHandler": [
                    "",
                    "//获取所在市",
                    "var areaid = Ext.getCmp('ElevatorFile_provinciallevelid');//省份ID",
                    "",
                    "if(areaid.getValue()==''){",
                    "    Ext.toast('请先选择省份!');",
                    "    return;",
                    "}",
                    "",
                    "if(areaid.getValue()=='110000' || areaid.getValue()=='120000' || areaid.getValue()=='310000'|| areaid.getValue()=='500000'|| areaid.getValue()=='810000'|| areaid.getValue()=='820000'){",
                    "    Ext.toast('直辖市或特别行政区请直接选择县区!');",
                    "    return;",
                    "}",
                    "",
                    "var tpl =",
                    "    '<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{areaname}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftcitylevelid',",
                    "    storeparm: {",
                    "       userid: global.getUserId(),",
                    "       searchkey: textfield.getValue(),",
                    "       areatype: 'C',",
                    "       areaid: areaid.getValue()",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: false,",
                    "    allowedit: false,",
                    "    allowsearch: false,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchkey = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "        } else {",
                    "            var value = record.get('areaname');",
                    "            textfield.setValue(value);",
                    "            Ext.getCmp('ElevatorFile_citylevelid').setValue(record.get('areaid'));",
                    "",
                    "            //清空县区",
                    "            Ext.getCmp('ElevatorFile_countylevelidStr').setValue();",
                    "            Ext.getCmp('ElevatorFile_countylevelid').setValue();",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_citylevelidStrTap",
            "designerId": "e92b3a16-6f8e-44ff-a5fe-ca98f93859a4"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_countylevelidStr",
                "designer|params": [
                    "textfield"
                ],
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_countylevelidStrTap",
                "implHandler": [
                    "",
                    "//获取县区",
                    "var areaid = Ext.getCmp('ElevatorFile_citylevelid');//所在市ID",
                    "var provid = Ext.getCmp('ElevatorFile_provinciallevelid');//省份ID",
                    "",
                    "if(provid.getValue()!='110000' && provid.getValue()!='120000' && provid.getValue()!='310000'&& provid.getValue()!='500000'&& provid.getValue()!='810000'&& provid.getValue()!='820000'){",
                    "    if(areaid.getValue()==''){",
                    "        Ext.toast('请先选择所在市!');",
                    "        return;",
                    "    }",
                    "}else{",
                    "    areaid = provid;",
                    "}",
                    "",
                    "",
                    "var tpl =",
                    "    '<div class=\"liftnet-font-size14 liftnet-fontColor-darkGray\">{areaname}</div>';",
                    "",
                    "viewUtil.goNext('Common.ComSelect', {",
                    "    textfield: textfield,",
                    "    storeid: 'eng_liftcountylevelid',",
                    "    storeparm: {",
                    "       userid: global.getUserId(),",
                    "       searchkey: textfield.getValue(),",
                    "       areatype: 'D',",
                    "       areaid: areaid.getValue()",
                    "    },",
                    "    itemtpl: tpl,",
                    "    paging: false,",
                    "    allowedit: false,",
                    "    allowsearch: false,",
                    "    fnSetFilter: function(parm, text) {",
                    "        parm.searchkey = text;",
                    "        return parm;",
                    "    },",
                    "    fnSelected: function(record) {",
                    "        if(typeof(record)==='string') {",
                    "            textfield.setValue(record);",
                    "        } else {",
                    "            var value = record.get('areaname');",
                    "            textfield.setValue(value);",
                    "            Ext.getCmp('ElevatorFile_countylevelid').setValue(record.get('areaid'));",
                    "        }",
                    "    }",
                    "});",
                    "textfield.blur();",
                    "",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_countylevelidStrTap",
            "designerId": "da9945c3-2fdf-4b3a-b6f7-9901396fb527"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#ElevatorFile_Camera",
                "designer|targetType": "Ext.Button",
                "fn": "onElevatorFile_CameraTap",
                "implHandler": [
                    "console.log('-----进入相机');",
                    "var parm = {",
                    "    callback :function(filename){",
                    "        for(var i=1;i<7;i++){",
                    "            var ImgID = 'ElevatortFile_Photo_'+i;",
                    "            var Img = Ext.getCmp(ImgID);",
                    "            var ImgSrc = Ext.getCmp(ImgID).getSrc();",
                    "",
                    "            if(filename!==''){",
                    "                if(ImgSrc==='resources/images/notPhoto.png'||ImgSrc==='resources/images/camera.png'){",
                    "                    //Img.setSrc(filename);",
                    "                    //Img.setItemId('ElevatortFile_photo');",
                    "",
                    "                    //获取照片跳转至填写描述的界面",
                    "                    viewUtil.goNext('Engineer.EngElevatorFile_Photo',{ImgID:ImgID,ImgSrc:filename});",
                    "                    return;",
                    "                }",
                    "            }",
                    "        }",
                    "    },//回调函数",
                    "    source:'CAMEAR',// 相机或相册，CAMEAR/ALBUM",
                    "    direction:'FRONT',// 前镜头或后镜头，FRONT/BACK",
                    "    width:640,\t//width",
                    "    height:640 // height",
                    "};",
                    "phone.takePhoto(parm);"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_CameraTap",
            "designerId": "d7699388-f2dd-4505-95ab-768c6a7dcad3"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#ElevatorFile_Album",
                "designer|targetType": "Ext.Button",
                "fn": "onElevatorFile_AlbumTap",
                "implHandler": [
                    "console.log('-----进入相册');",
                    "var parm = {",
                    "    callback :function(filename){",
                    "        for(var i=1;i<7;i++){",
                    "            var ImgID = 'ElevatortFile_Photo_'+i;",
                    "            var Img = Ext.getCmp(ImgID);",
                    "            var ImgSrc = Ext.getCmp(ImgID).getSrc();",
                    "",
                    "            if(filename!==''){",
                    "                if(ImgSrc==='resources/images/notPhoto.png'||ImgSrc==='resources/images/camera.png'){",
                    "                    //Img.setSrc(filename);",
                    "                    //Img.setItemId('ElevatortFile_photo');",
                    "",
                    "                    //获取照片跳转至填写描述的界面",
                    "                    viewUtil.goNext('Engineer.EngElevatorFile_Photo',{ImgID:ImgID,ImgSrc:filename,RemarkStr:'',Type:'B'});",
                    "                    return;",
                    "                }",
                    "            }",
                    "        }",
                    "    },//回调函数",
                    "    source:'ALBUM',// 相机或相册，CAMEAR/ALBUM",
                    "    direction:'FRONT',// 前镜头或后镜头，FRONT/BACK",
                    "    width:640,\t//width",
                    "    height:640 // height",
                    "};",
                    "phone.takePhoto(parm);"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_AlbumTap",
            "designerId": "a84411ff-5ed1-45c5-a23a-0aa1894b6a4c"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "panel#EngElevatorFile_Photo",
                "designer|targetType": "Ext.Panel",
                "fn": "onEngElevatorFile_PhotoInitialize",
                "implHandler": [
                    "//初始化查看照片页面",
                    "var ImgID = component.initialConfig.parm.ImgID; //上一页面的Image对象",
                    "var ImgSrc = component.initialConfig.parm.ImgSrc; //拍得照片的路径",
                    "var RemarkStr = component.initialConfig.parm.RemarkStr; //图片描述",
                    "var Type = component.initialConfig.parm.Type;//判断是点击按钮进入还是点击图片进入",
                    "",
                    "",
                    "Ext.getCmp('ElevatorFile_Photo').setSrc(ImgSrc);",
                    "Ext.getCmp('ElevatorFile_Img').setValue(ImgID);",
                    "Ext.getCmp('ElevatorFile_Remark').setValue(RemarkStr);",
                    "",
                    "if(Type=='A'){//点击图片进入,把删除按钮显示",
                    "    Ext.getCmp('ElevatorFile_DelBtn').setHidden(false);",
                    "}",
                    "",
                    ""
                ],
                "name": "initialize"
            },
            "name": "onEngElevatorFile_PhotoInitialize",
            "designerId": "61bc817c-7fa4-49bb-84f7-5ba30dc8e326"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#ElevatorFile_PhotoSave",
                "designer|targetType": "Ext.Button",
                "fn": "onElevatorFile_PhotoSaveTap",
                "implHandler": [
                    "//添加图片至上一界面",
                    "var imgSrc = Ext.getCmp('ElevatorFile_Photo').getSrc();",
                    "var ImgID = Ext.getCmp('ElevatorFile_Img').getValue();",
                    "Ext.getCmp(ImgID).setSrc(imgSrc);",
                    "Ext.getCmp(ImgID).setItemId('ElevatortFile_photo');",
                    "",
                    "var Remark = Ext.getCmp('ElevatorFile_Remark').getValue();",
                    "var RemarkNum = ImgID.split('_')[2];",
                    "Ext.getCmp('ElevatorFile_Remark_'+RemarkNum).setHtml(Remark);",
                    "",
                    "for(var i=RemarkNum;i<6;i++){",
                    "    var NextNum = Number(i)+1;",
                    "    if(Ext.getCmp('ElevatortFile_Photo_'+NextNum).getSrc()=='resources/images/notPhoto.png'||Ext.getCmp('ElevatortFile_Photo_'+NextNum).getSrc()=='resources/images/camera.png'){",
                    "        Ext.getCmp('ElevatortFile_Photo_'+NextNum).setSrc('resources/images/camera.png');",
                    "        Ext.getCmp('ElevatortFile_Photo_'+NextNum).setItemId('ElevatorFile_Photo_camera');",
                    "        break;",
                    "    }",
                    "    ",
                    "}",
                    "",
                    "",
                    "Ext.getCmp('ElevatorFile_ActionSheet').hide();",
                    "viewUtil.goLast();",
                    ""
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_PhotoSaveTap",
            "designerId": "99227716-09d6-4cd8-95be-2345e30af2c8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#ElevatorFile_DelBtn",
                "designer|targetType": "Ext.Button",
                "fn": "onElevatorFile_DelBtnTap",
                "implHandler": [
                    "//删除图片至上一界面",
                    "var ImgID = Ext.getCmp('ElevatorFile_Img').getValue();",
                    "Ext.getCmp(ImgID).setSrc('resources/images/notPhoto.png');",
                    "Ext.getCmp(ImgID).setItemId();",
                    "",
                    "var Remark = Ext.getCmp('ElevatorFile_Remark').getValue();",
                    "var RemarkNum = ImgID.split('_')[2];",
                    "Ext.getCmp('ElevatorFile_Remark_'+RemarkNum).setHtml('描述....');",
                    "",
                    "//判断是否存在相机照片",
                    "var hasCamera = false;",
                    "for(var i=1;i<7;i++){",
                    "    var imgID = 'ElevatortFile_Photo_'+i;",
                    "    var imgSrc = Ext.getCmp(imgID).getSrc();",
                    "    if(imgSrc==='resources/images/camera.png'){",
                    "        hasCamera = true;",
                    "    }",
                    "}",
                    "    if(hasCamera){",
                    "        Ext.getCmp(ImgID).setSrc('resources/images/notPhoto.png');",
                    "        Ext.getCmp(ImgID).setItemId();",
                    "    }else{",
                    "        Ext.getCmp(ImgID).setSrc('resources/images/camera.png');",
                    "        Ext.getCmp(ImgID).setItemId('ElevatorFile_Photo_camera');",
                    "    }",
                    "",
                    "",
                    "    //冒泡排序",
                    "for(var j=1;j<7;j++){",
                    "    for(var z=j+1;z<7;z++){",
                    "        var imgID2 = 'ElevatortFile_Photo_'+j;",
                    "        var imgSrc2 = Ext.getCmp(imgID2).getSrc();",
                    "        var remarkID2 = 'ElevatorFile_Remark_'+j;",
                    "        var remark2 = Ext.getCmp(remarkID2).getHtml();",
                    "        if(imgSrc2!=='resources/images/notPhoto.png'&&imgSrc3!=='resources/images/camera.png'){",
                    "            continue;",
                    "        }else{",
                    "            var imgID3 = 'ElevatortFile_Photo_'+z;",
                    "            var imgSrc3 = Ext.getCmp(imgID3).getSrc();",
                    "            var remarkID3 = 'ElevatorFile_Remark_'+z;",
                    "            var remark3 = Ext.getCmp(remarkID3).getHtml();",
                    "            if(imgSrc3!=='resources/images/notPhoto.png'&&imgSrc3!=='resources/images/camera.png'){",
                    "                Ext.getCmp(imgID2).setSrc(imgSrc3);",
                    "                Ext.getCmp(imgID2).setItemId('ElevatortFile_photo');",
                    "                Ext.getCmp(imgID3).setSrc(imgSrc2);",
                    "                Ext.getCmp(imgID3).setItemId();",
                    "                Ext.getCmp(remarkID2).setHtml(remark3);",
                    "                Ext.getCmp(remarkID3).setHtml(remark2);",
                    "            }",
                    "        }",
                    "    }",
                    "}",
                    "",
                    "        //冒泡排序",
                    "for(var j=1;j<7;j++){",
                    "    for(var z=j+1;z<7;z++){",
                    "        var imgID2 = 'ElevatortFile_Photo_'+j;",
                    "        var imgSrc2 = Ext.getCmp(imgID2).getSrc();",
                    "        var remarkID2 = 'ElevatorFile_Remark_'+j;",
                    "        var remark2 = Ext.getCmp(remarkID2).getHtml();",
                    "        if(imgSrc2!=='resources/images/camera.png' && imgSrc2!=='resources/images/notPhoto.png'){",
                    "            continue;",
                    "        }else{",
                    "            var imgID3 = 'ElevatortFile_Photo_'+z;",
                    "            var imgSrc3 = Ext.getCmp(imgID3).getSrc();",
                    "            var remarkID3 = 'ElevatorFile_Remark_'+z;",
                    "            var remark3 = Ext.getCmp(remarkID3).getHtml();",
                    "            if(imgSrc3==='resources/images/camera.png'){",
                    "                Ext.getCmp(imgID2).setSrc(imgSrc3);",
                    "                Ext.getCmp(imgID2).setItemId('ElevatorFile_Photo_camera');",
                    "                Ext.getCmp(imgID3).setSrc(imgSrc2);",
                    "                Ext.getCmp(imgID3).setItemId();",
                    "                Ext.getCmp(remarkID2).setHtml(remark3);",
                    "                Ext.getCmp(remarkID3).setHtml(remark2);",
                    "            }",
                    "        }",
                    "    }",
                    "}",
                    "",
                    "",
                    "viewUtil.goLast();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_DelBtnTap",
            "designerId": "797a7074-2903-4973-92ff-9d621c8c3c2e"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "image#ElevatortFile_photo",
                "designer|targetType": "Ext.Img",
                "fn": "onElevatortFile_photoTap",
                "implHandler": [
                    "var ImgID = image.getId();",
                    "var RemarkNum = ImgID.split('_')[2];",
                    "var RemarkStr = Ext.getCmp('ElevatorFile_Remark_'+RemarkNum).getHtml();",
                    "var filename = image.getSrc();",
                    "//点击图片进入查看照片页面",
                    "viewUtil.goNext('Engineer.EngElevatorFile_Photo',{ImgID:ImgID,ImgSrc:filename,RemarkStr:RemarkStr,Type:'A'});"
                ],
                "name": "tap"
            },
            "name": "onElevatortFile_photoTap",
            "designerId": "426b18a9-ff8e-47e2-849d-f6b084791934"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "parm"
                ],
                "fn": "doElevatorFile_Process",
                "implHandler": [
                    "//电梯修改/删除入口",
                    "var me = this;",
                    "",
                    "var operation = parm.operation;",
                    "var record = parm.record;//设备注册码",
                    "",
                    "switch(operation) {",
                    "    case '修改':",
                    "",
                    "        viewUtil.goNext('Engineer.EngElevatorFile_Add',{record:record});",
                    "",
                    "        break;",
                    "    case '删除':",
                    "        Ext.Msg.confirm(\"注意\", \"确认是否删除？\", function(n) {",
                    "            if(n=='no')return;",
                    "",
                    "            var userid = global.getUserId();",
                    "",
                    "            var adapter_parm = {",
                    "                userid : userid,",
                    "                prono  : record.get('prono')",
                    "",
                    "            };",
                    "            var store = dataUtil.createStore('eng_elevatorfile_cl');",
                    "            loadMask.show();",
                    "            store.updateDat(",
                    "                function(info) {",
                    "                    loadMask.hide();",
                    "                    ",
                    "                    Ext.toast(info);",
                    "",
                    "                    // 刷新电梯档案列表",
                    "                    me.doEngElevatorFile_Search(1,20,{searchkey:''},'refresh');",
                    "",
                    "                },",
                    "                function(info) {",
                    "                    loadMask.hide();",
                    "                    if(!info) info = '(未知)';",
                    "                    Ext.toast('未能完成' + operation + '操作，错误信息是：' + info);",
                    "                },",
                    "                adapter_parm",
                    "            );",
                    "",
                    "        });",
                    "        return;",
                    "",
                    "    default:",
                    "        Ext.toast('未知的操作:' + operation);",
                    "        return;",
                    "}",
                    "",
                    ""
                ]
            },
            "name": "doElevatorFile_Process",
            "designerId": "f07b5f12-6ea4-4a10-a063-89cc3bb0e147"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "image#ElevatorFile_Photo_camera",
                "designer|targetType": "Ext.Img",
                "fn": "onElevatorFile_Photo_cameraTap",
                "implHandler": [
                    "Ext.getCmp('ElevatorFile_ActionSheet').show();"
                ],
                "name": "tap"
            },
            "name": "onElevatorFile_Photo_cameraTap",
            "designerId": "ba43f4d9-2fd4-4526-9e04-1303ce8f1554"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_prono",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_pronoFocus",
                "implHandler": [
                    "if(!textfield.getValue()) return;",
                    "",
                    "",
                    "var nowValue = Ext.getCmp('ElevatorFile_NowProno').getValue();",
                    "console.log('nowvalue:'+nowValue);",
                    "",
                    "if(!textfield.getValue().match(/^(\\d{4}-\\d{6}-\\d{6}-\\d{1,8})$/)){",
                    "    Ext.Msg.alert('注意', '设备注册码的格式有误',Ext.emptyFn);",
                    "    textfield.setValue(nowValue);",
                    "    textfield.focus();",
                    "    return;",
                    "}",
                    "",
                    "",
                    "//后台检测该设备注册码是否已存在",
                    "if(textfield.getValue()!==nowValue){",
                    "var parm = {",
                    "    userid : global.getUserId(),",
                    "    prono : textfield.getValue()",
                    "};",
                    "",
                    "var store = dataUtil.createStore('eng_elevatorfile_checkProno');",
                    "loadMask.show();",
                    "",
                    "store.updateDat(",
                    "    function(liftstatus) {",
                    "        loadMask.hide();",
                    "        if(liftstatus=='1') {",
                    "",
                    "        }else{",
                    "            Ext.Msg.alert('注意', '该设备注册码已存在',Ext.emptyFn);",
                    "            textfield.setValue(nowValue);",
                    "            textfield.focus();",
                    "        }",
                    "    },",
                    "    function(info) {",
                    "        loadMask.hide();",
                    "        if(!info) info = '(未知)';",
                    "        Ext.toast('检测设备注册码唯一性操作有误，错误信息是：' + info);",
                    "    },",
                    "    parm",
                    ");",
                    "",
                    "}"
                ],
                "name": "blur"
            },
            "name": "onElevatorFile_pronoFocus",
            "designerId": "ae315a69-4677-4f2a-8546-4692ead21908"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "selectfield#ElevatorFile_typeid",
                "designer|targetType": "Ext.field.Select",
                "fn": "onElevatorFile_typeidChange",
                "implHandler": [
                    "console.log('----------分类');",
                    "console.log(selectfield);"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_typeidChange",
            "designerId": "359bdc16-57df-4650-b406-28ea6b3affb3"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_r9",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_r9Change",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]*$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写正整数！');",
                    "    textfield.resumeEvents(false);",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_r9Change",
            "designerId": "1097527d-f510-406a-8894-fdaf69233540"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_controlnum",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_controlnumChange",
                "implHandler": [
                    "if(!newValue) return;",
                    "//检测是否为数字",
                    "if(!newValue.match(/^[0-9]*$/)){",
                    "    textfield.suspendEvents();",
                    "    Ext.toast(textfield.getLabel()+'必须填写正整数！');",
                    "    textfield.resumeEvents(false);",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_controlnumChange",
            "designerId": "ad82536a-fd38-4ab7-b90e-b13e2802f424"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "obj",
                    "nextId"
                ],
                "fn": "doSetNextDate",
                "implHandler": [
                    "var thisDate = obj.getValue();",
                    "if(thisDate!==''){",
                    "    var t_date=new Date(thisDate);",
                    "    console.log(t_date);",
                    "    t_date.setDate(t_date.getDate()+365);",
                    "    var d=t_date.getDate();",
                    "    var m=t_date.getMonth()+1;",
                    "    var y=t_date.getFullYear();",
                    "    var t_day=\"\";",
                    "    if(m<10){m='0'+m;}",
                    "    if(d<10){d='0'+d;}",
                    "    t_day=y+\"-\"+m+\"-\"+d;",
                    "    Ext.getCmp(nextId).setValue(new Date(t_day));",
                    "}else{",
                    "    Ext.getCmp(nextId).setValue(\"\");",
                    "}"
                ]
            },
            "name": "doSetNextDate",
            "designerId": "3e295fcd-0993-4ca6-bc09-ab449470b56b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "datepickerfield#ElevatorFile_r7",
                "designer|targetType": "Ext.field.DatePicker",
                "fn": "onElevatorFile_r7Change",
                "implHandler": [
                    "var me = this;",
                    "me.doSetNextDate(datepickerfield,'ElevatorFile_r8');"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_r7Change",
            "designerId": "c1948b3b-0865-4d04-94be-c7d1e8544108"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "datepickerfield#ElevatorFile_speedcheckdate",
                "designer|targetType": "Ext.field.DatePicker",
                "fn": "onElevatorFile_speedcheckdateChange",
                "implHandler": [
                    "var me = this;",
                    "me.doSetNextDate(datepickerfield,'ElevatorFile_speednextcheckdate');"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_speedcheckdateChange",
            "designerId": "ff2610dc-5cac-455e-92a1-f3d3d2b7c1b8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_userlinkphone",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_userlinkphoneChange",
                "implHandler": [
                    "//联系电话",
                    "if(!newValue) return;",
                    "",
                    "if(!global.isTelNo(newValue)) {",
                    "    textfield.suspendEvents();",
                    "    Ext.toast('电话号码格式不正确！');",
                    "    textfield.resumeEvents(false);",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_userlinkphoneChange",
            "designerId": "8054886b-34d4-444d-825c-3276e1f66063"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "textfield#ElevatorFile_r5",
                "designer|targetType": "Ext.field.Text",
                "fn": "onElevatorFile_userlinkphoneChange1",
                "implHandler": [
                    "//联系电话",
                    "if(!newValue) return;",
                    "",
                    "if(!global.isTelNo(newValue)) {",
                    "    textfield.suspendEvents();",
                    "    Ext.toast('电话号码格式不正确！');",
                    "    textfield.resumeEvents(false);",
                    "}"
                ],
                "name": "change"
            },
            "name": "onElevatorFile_userlinkphoneChange1",
            "designerId": "04e9d21a-efd5-4234-a915-8f2c3708e4b9"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "button"
                ],
                "fn": "doInitialNextStateButton",
                "implHandler": [
                    "if(button.text=='修改'){",
                    "    button.hidden = updatejurisdiction;",
                    "}else if(button.text=='删除'){",
                    "     button.hidden = deletejueisdiction;",
                    "",
                    "}"
                ]
            },
            "name": "doInitialNextStateButton",
            "designerId": "069a4f69-10a2-4772-889d-f297f4a2d2b9"
        }
    ]
}