/*
 * File: app/store/eng_qualitycheck_todolist_new.js
 *
 * This file was generated by Sencha Architect version 3.5.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.4.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.4.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('liftnet.store.eng_qualitycheck_todolist_new', {
    extend: 'Ext.data.Store',

    requires: [
        'Ext.data.Field'
    ],

    config: {
        storeId: 'eng_qualitycheck_todolist_new',
        fields: [
            {
                name: 'icon'
            },
            {
                name: 'qualityname'
            },
            {
                name: 'qualityid'
            },
            {
                name: 'count'
            }
        ]
    },

    loadDat: function(onSuccess, onFailure, parm) {
        var me = this;

        if(global.isWorklight()) {
            // adapter取数
            var url = '';
            var userid = global.getUserId();
            var adapterParm = {userid:userid};

            callPostAdapter(
                url, adapterParm,
                function(ret) {
                    var d = decoDat(ret.data);
                    me.setData(d);
                    onSuccess();
                },
                onFailure);
        } else {
            this.setData([
                { icon:'ln3 ln3-first', qualityname:'首检', count:'12' },
                { icon:'ln3 ln3-spanner', qualityname:'自检', count:'5' },
                { icon:'ln3 ln3-find-checkmark', qualityname:'专检', count:'3' },
                { icon:'ln3 ln3-year', qualityname:'年检', count:'20' },
                { icon:'ln3 ln3-check', qualityname:'抽检', count:'2' },
                { icon:'ln3 ln3-reload', qualityname:'整改', count:'1' },
                //         { icon:'ln3 ln3-voucher', qualityname:'首检项目移交检验报告', count:'0' },
            ]);

                onSuccess();
                }
    },

    updateDat: function(onSuccess, onFailure, parm) {

    },

    filteDat: function(parm) {

    },

    decoDat: function(data) {
        if(!data) return([]);

        for(var i=0;i<data.length; i++) {
            switch(data[i].qualityname) {
                case '首检':
                    data[i].icon = 'ln3 ln3-first';
                    break;

                case '自检':
                    data[i].icon = 'ln3 ln3-spanner';
                    break;

                case '专检':
                    data[i].icon = 'ln3 ln3-find-checkmark';
                    break;
                case '年检':
                    data[i].icon = 'ln3 ln3-year';
                    break;
                case '抽检':
                    data[i].icon = 'ln3 ln3-check';
                    break;
                case '整改':
                    data[i].icon = 'ln3 ln3-reload';
                    break;
            }
        }

        return(data);
    }

});