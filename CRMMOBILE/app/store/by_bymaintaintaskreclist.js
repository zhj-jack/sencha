/*
 * File: app/store/by_bymaintaintaskreclist.js
 *
 * This file was generated by Sencha Architect version 3.5.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.4.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.4.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('liftnet.store.by_bymaintaintaskreclist', {
    extend: 'Ext.data.Store',

    requires: [
        'Ext.data.Field'
    ],

    config: {
        storeId: 'by_bymaintaintaskreclist',
        fields: [
            {
                name: 'Jnlno'
            },
            {
                name: 'ContractID'
            },
            {
                name: 'ProjectJnl'
            },
            {
                name: 'ProjectName'
            },
            {
                name: 'ProjectAddress'
            },
            {
                name: 'CustID'
            },
            {
                name: 'CustName'
            },
            {
                name: 'ReveStatus'
            },
            {
                name: 'FlowStatus'
            },
            {
                name: 'TokenID'
            },
            {
                name: 'TaskName'
            },
            {
                name: 'ContractNum'
            },
            {
                name: 'TaskNum'
            },
            {
                name: 'ReadFlag'
            },
            {
                name: 'nextstate'
            },
            {
                name: 'bybz'
            }
        ]
    },

    loadDat: function(onSuccess, onFailure, parm) {
        var me = this;
                this.setData([]);
                console.log(JsonUtil.convertToString(parm));
                if(global.isWorklight()) {// adapter取数
                    var url = '/adapters/by/api/1.0/bymaintaintaskreclist';
                    callPostAdapter(
                        url, parm,
                        function(ret) {
                            var d = me.decoDat(ret.data);
                            me.setData(d);
                            onSuccess(d.length);
                        },
                        onFailure);
                } else {
                    // 演示数据
                    var d = this.decoDat([
                        {
                            Jnlno:'FB001',
                            ContractID:'16保大',
                            ProjectJnl:'10000',
                            ProjectName:'万科四季花园',
                            ProjectAddress:'某个巷子',
                            CustID:'',
                            CustName:'',
                            ReveStatus:'未接受',
                            FlowStatus:'待审',
                            TokenID:'',
                            TaskName:'',
                            ContractNum:'10',
                            TaskNum:'5',
                            ReadFlag:'',
                            bybz:'张三(维保一组)',
                            nextstate: [
                                {name:"审核",url:"http://127.0.0.1/审核"}
                            ]
                        },
                        {
                            Jnlno:'FB001',
                            ContractID:'16保小',
                            ProjectJnl:'10000',
                            ProjectName:'万达广场',
                            ProjectAddress:'某个巷子',
                            CustID:'',
                            CustName:'',
                            ReveStatus:'未接受',
                            FlowStatus:'通过',
                            TokenID:'',
                            TaskName:'',
                            ContractNum:'10',
                            TaskNum:'3',
                            ReadFlag:'',
                            bybz:'张三(维保一组)',
                            nextstate: [
                                {name:"接收",url:"http://127.0.0.1/接收"},
                                {name:"退回",url:"http://127.0.0.1/退回"},
                                {name:"删除",url:"http://127.0.0.1/删除"}
                            ]
                        },
                        {
                            Jnlno:'FB001',
                            ContractID:'16保002',
                            ProjectJnl:'10000',
                            ProjectName:'广州荔湾区滘口西湾荟广场',
                            ProjectAddress:'某个巷子',
                            CustID:'',
                            CustName:'',
                            ReveStatus:'已接收',
                            FlowStatus:'通过',
                            TokenID:'',
                            TaskName:'',
                            ContractNum:'20',
                            TaskNum:'5',
                            ReadFlag:'',
                            bybz:'张三(维保一组)',
                            nextstate: [
                                {name:"退回",url:"http://127.0.0.1/退回"}
                            ]
                        },
                        {
                            Jnlno:'FB001',
                            ContractID:'16保366',
                            ProjectJnl:'10000',
                            ProjectName:'广州市荔湾区华越友联科技有限公司',
                            ProjectAddress:'某个巷子',
                            CustID:'',
                            CustName:'',
                            ReveStatus:'已退回',
                            FlowStatus:'通过',
                            TokenID:'',
                            TaskName:'',
                            ContractNum:'15',
                            TaskNum:'5',
                            ReadFlag:'',
                            bybz:'张三(维保一组)',
                            nextstate: [
                                {name:"删除",url:"http://127.0.0.1/删除"}
                            ]
                        }
                    ]);
                    this.setData(d);
                    onSuccess(d.length);
                }
    },

    decoDat: function(data) {
        // stateUrl:	状态的图片地址
                // stateColor:	状态的颜色
                // titleIcon:	标题的图标
                // titleColor:	标题的颜色

        //         if(!data) return([]);

        //         for(var i=0;i<data.length; i++) {
        //             switch(data[i].taskstate) {
        //                 case '未分派':
        //                     data[i].stateColor = 'liftnet-fontColor-red';
        //                     data[i].stateUrl   = 'resources/images/maintenance_icon01.png';
        //                     data[i].titleIcon  = '<i class="ln ln-message1"></i>';
        //                     data[i].titleColor = 'liftnet-fontColor-red';
        //                     break;

        //                 case '全部已分派':
        //                     data[i].stateColor = 'liftnet-fontColor-blue';
        //                     data[i].stateUrl   = 'resources/images/maintenance_icon02.png';
        //                     data[i].titleIcon  = '<i class="ln ln-message1"></i>';
        //                     data[i].titleColor = 'liftnet-fontColor-blue';
        //                     break;

        //                 case '部分未分派':
        //                     data[i].stateColor = 'liftnet-fontColor-orange';
        //                     data[i].stateUrl   = 'resources/images/maintenance_icon03.png';
        //                     data[i].titleIcon  = '<i class="ln ln-message1"></i>';
        //                     data[i].titleColor = 'liftnet-fontColor-orange';
        //                     break;
        //             }
        //         }

                return(data);
    },

    filteDat: function(parm) {
        this.clearFilter();
                if(parm!=='') {
                    this.filterBy(function(item) {
                        var s = item.get("ProjectName") + ' ' + item.get("FlowStatus") + ' ' + item.get("bybz");
                        return (s.toUpperCase().indexOf(parm.toUpperCase())>=0);
                    });
                }
    }

});