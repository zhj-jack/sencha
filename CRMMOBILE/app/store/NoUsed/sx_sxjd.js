/*
 * File: app/store/NoUsed/sx_sxjd.js
 *
 * This file was generated by Sencha Architect version 3.5.0.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.4.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.4.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('liftnet.store.NoUsed.sx_sxjd', {
    extend: 'Ext.data.Store',

    requires: [
        'Ext.data.Field'
    ],

    config: {
        storeId: 'NoUsed.sx_sxjd',
        fields: [
            {
                name: 'address',
                type: 'string'
            },
            {
                name: 'G_SetOutUser',
                type: 'string'
            },
            {
                name: 'G_SetOutDate',
                type: 'string'
            },
            {
                name: 'G_SetOutAddress',
                type: 'string'
            },
            {
                name: 'G_ArriveUser',
                type: 'string'
            },
            {
                name: 'G_ArriveDate',
                type: 'string'
            },
            {
                name: 'G_ArriveAddress',
                type: 'string'
            },
            {
                name: 'G_EscapeUser',
                type: 'string'
            },
            {
                name: 'G_EscapeDate',
                type: 'string'
            },
            {
                name: 'G_EscapeAddress',
                type: 'string'
            },
            {
                name: 'G_FinishUser',
                type: 'string'
            },
            {
                name: 'G_FinishDate',
                type: 'string'
            },
            {
                name: 'G_FinishAddress',
                type: 'string'
            },
            {
                name: 'qrcodeimg',
                type: 'string'
            },
            {
                name: 'missionimg',
                type: 'string'
            },
            {
                name: 'status',
                type: 'string'
            }
        ]
    },

    loadDat: function(onSuccess, onFailure, trno) {
        /* 状态：
            0	起草
            103	关闭
            104	退单
            201	已派工
            202	已接收？
            301	已出发
            302	到场
            303	解困
            401	完工
        */

        var me = this;

        if(global.isWorklight()) {
            // adapter取数
            var url = '/adapters/sx/api/1.0/sxjd';
            var userid = global.getUserId();
            var adapterParm = {userid:userid, trid:trno};

            callPostAdapter(
                url, adapterParm,
                function(ret) {
                    me.setData(ret.data);
                    onSuccess(ret.data.length);
                },
                onFailure);
        } else {
            // 受信处理进度-演示数据
            this.setData([
                {
                    address: '广州市海珠区江泰路故障地址',
                    G_SetOutUser:'出发人',
                    G_SetOutDate:'2015-12-01 09:00',
                    G_SetOutAddress:'广州市越秀区出发路地址街',
                    G_ArriveUser:'到场人',
                    G_ArriveDate:'2015-12-01 09:30',
                    G_ArriveAddress:'广州市海珠区江泰路到场地址',
                    G_EscapeUser:'解困人',
                    G_EscapeDate:'2015-12-01 09:35',
                    G_EscapeAddress:'广州市海珠区江泰路解困地址',
                    G_FinishUser:'完工人',
                    G_FinishDate:'2015-12-01 12:00',
                    G_FinishAddress:'广州市海珠区江泰路完工地址',
                    qrcodeimg: 'resources/images/picture01.jpg',
                    missionimg: ['resources/images/picture01.jpg','resources/images/picture01.jpg'],
                    status: '401'
                }
            ]);
            onSuccess(1);
        }
    }

});